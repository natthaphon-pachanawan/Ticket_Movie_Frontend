<h2>ЁЯУд р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╕кр╕ер╕┤р╕Ыр╕Бр╕▓р╕гр╣Вр╕нр╕Щр╣Ар╕Зр╕┤р╕Щ</h2>

<!-- ========== р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕Ир╕нр╕З ========== -->
<div *ngIf="booking">
  <p><b>р╕лр╕Щр╕▒р╕З:</b> {{ booking.screening.movie.title }}</p>
  <p><b>р╕гр╕нр╕Ъ:</b> {{ booking.screening.screening_datetime | date:'medium' }}</p>
  <p><b>р╕вр╕нр╕Фр╕Кр╕│р╕гр╕░:</b> {{ estimatedAmount }} р╕Ър╕▓р╕Ч</p>
</div>
<hr>

<!-- ========== р╣Бр╕кр╕Фр╕Зр╕кр╕ер╕┤р╕Ыр╣Ар╕Фр╕┤р╕б (р╕Цр╣Йр╕▓р╕бр╕╡) ========== -->
<div *ngIf="slipStatus!=='none'" class="my-4">
  <p>
    р╕кр╕Цр╕▓р╕Щр╕░р╕кр╕ер╕┤р╕Ы:
    <span [ngClass]="{
      'text-yellow-600': slipStatus==='pending',
      'text-green-600' : slipStatus==='confirmed',
      'text-red-600'   : slipStatus==='rejected'
    }">
      {{ slipStatus }}
    </span>
  </p>

  <img *ngIf="slipStatus!=='rejected'"
       [src]="'http://localhost:8000/storage/'+slip.slip_image_url"
       width="260" class="border mb-2"/>

  <p *ngIf="slipStatus==='rejected'" class="text-red-600">
    тЭМ р╕кр╕ер╕┤р╕Ыр╕Цр╕╣р╕Бр╕Ыр╕Пр╕┤р╣Ар╕кр╕Ш р╕Бр╕гр╕╕р╕Ур╕▓р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╣Гр╕лр╕бр╣И
  </p>
</div>

<!-- ========== р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╣Гр╕лр╕бр╣Ир╣Др╕Фр╣Йр╣Ар╕Йр╕Юр╕▓р╕░ none / rejected ========== -->
<div *ngIf="canUpload()">
  <input type="file"
         accept="image/*"
         (change)="onFileSelected($event)" />

  <div *ngIf="previewUrl" class="mt-2">
    <p>р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З:</p>
    <img [src]="previewUrl" width="260" class="border" />
  </div>

  <button class="mt-4 px-4 py-2 bg-green-600 text-white rounded"
          (click)="uploadSlip()"
          [disabled]="!selectedFile || uploading">
    тЬЕ р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Ф
  </button>
</div>

<!-- ========== р╣Ар╕бр╕╖р╣Ир╕н pending / confirmed р╕Ир╕░р╣Бр╕кр╕Фр╕Зр╣Ар╕Йр╕в р╣Ж ========== -->
<div *ngIf="!canUpload() && slipStatus!=='none'">
  <p class="text-gray-500">
    р╕лр╕▓р╕Бр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╣Гр╕лр╕бр╣И р╕Бр╕гр╕╕р╕Ур╕▓р╕гр╕нр╣Бр╕нр╕Фр╕бр╕┤р╕Щр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Бр╕ер╕░р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕кр╕Цр╕▓р╕Щр╕░р╣Ар╕Ыр╣Зр╕Щ <b>rejected</b>
  </p>
</div>
